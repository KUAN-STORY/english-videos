<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Stories Â· Player</title>
  <style>
    :root{
      --bg:#0f172a;        /* æ•´é«”èƒŒæ™¯ */
      --panel:#0b1220;     /* é¢æ¿åº•è‰² */
      --soft:#0d1628;      /* é¢æ¿æ¬¡åº•è‰² */
      --text:#e5e7eb;      /* ä¸»è¦æ–‡å­— */
      --muted:#94a3b8;     /* æ¬¡æ–‡å­— */
      --accent:#38bdf8;    /* å¼·èª¿è‰²(æŒ‰éˆ•/æ»‘æ¡¿) */
      --accent-2:#22d3ee;  /* ç¬¬äºŒå¼·èª¿è‰² */
      --btn:#111827;       /* æŒ‰éˆ•åº• */
      --btn-hl:#1f2937;    /* æŒ‰éˆ• hover */
      --tab:#111827;
      --tab-active:#1f2937;
      --radius:14px;
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      background:var(--bg);
      color:var(--text);
      font-family: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Noto Sans", "Helvetica Neue", Arial, "Apple Color Emoji","Segoe UI Emoji";
    }

    /* ç‰ˆé¢ï¼šå·¦å³ 50:50 */
    .page{
      display:flex;
      gap:14px;
      height:100%;
      padding:14px;
    }
    .left, .right{
      background:var(--panel);
      border-radius:var(--radius);
      overflow:hidden;
      display:flex;
      flex-direction:column;
    }
    .left{ width:50% }
    .right{ width:50% }

    /* å½±ç‰‡å®¹å™¨ï¼šè®“ video ä¸æœƒå£“åˆ°å·¥å…·åˆ— */
    .video-wrap{
      padding:16px;
      padding-bottom:0;
    }
    .video-frame{
      background:#000;
      border-radius:12px;
      overflow:hidden;
      position:relative;
      width:100%;
      /* ç”¨ 16:9 é«˜åº¦è¨ˆç®—ï¼Œè®“ç•«é¢ç©©å®šä¸äº‚è·³ */
      aspect-ratio:16/9;
      display:flex;align-items:center;justify-content:center;
    }
    video{ width:100%; height:100%; object-fit:contain; background:#000; }

    /* å·¦å´å·¥å…·åˆ—ï¼ˆå…©æ’ï¼‰ */
    .controls{
      background:var(--soft);
      padding:12px 16px 16px;
      margin:14px;
      margin-top:10px;
      border-radius:12px;
      display:flex;
      flex-direction:column;
      gap:10px;
    }
    .row{
      display:flex;flex-wrap:wrap;gap:10px;
      align-items:center;
    }
    .btn{
      background:var(--btn); color:var(--text);
      border:1px solid #0006;
      padding:10px 14px;
      border-radius:10px;
      cursor:pointer;
      display:inline-flex; align-items:center; gap:8px;
      user-select:none;
    }
    .btn:hover{ background:var(--btn-hl) }
    .btn.active{ outline:2px solid var(--accent); }
    .badge{
      display:inline-flex;align-items:center;gap:6px;
      background:#0008;color:var(--text);
      border:1px solid #0006;border-radius:10px;
      padding:8px 12px;
    }
    .speed-group{ margin-left:auto; display:flex; align-items:center; gap:10px; }
    .speed-range{ width:220px; accent-color:var(--accent) }
    .speed-val{ min-width:48px; text-align:right; color:var(--accent-2); }

    /* å³å´ï¼šåˆ†é  */
    .tabs{
      display:flex;gap:8px;
      background:var(--soft);
      padding:10px;
    }
    .tab{
      background:var(--tab); color:var(--text);
      border:1px solid #0006;
      padding:10px 14px; border-radius:10px; cursor:pointer;
    }
    .tab.active{ background:var(--tab-active); outline:2px solid var(--accent) }

    .tab-panels{ flex:1; overflow:auto; }
    .panel{ display:none; height:100%; }
    .panel.active{ display:block }

    /* ã€Œå­—å¹•ã€é¢æ¿å…§çš„è·Ÿéš¨/å¾®èª¿å·¥å…·åˆ— */
    .subtool{
      display:flex; gap:8px; align-items:center;
      padding:12px; background:var(--panel); position:sticky; top:0;
      border-bottom:1px solid #0006;
      z-index:5;
    }
    .subtool .label{ color:var(--muted) }
    .subtool .chip{ background:#0007; border:1px solid #0006; padding:6px 10px; border-radius:10px }
    .subtool .chip.primary{ color:var(--accent-2); border-color:#0aa3; }
    .table{
      width:100%; border-collapse:collapse;
      margin:12px;
    }
    .table th, .table td{
      border-bottom:1px solid #0006; padding:10px 8px;
    }
    .table th{ color:var(--muted); font-weight:600; text-align:left; position:sticky; top:52px; background:var(--panel); }
    .muted{ color:var(--muted) }
    .hint{ color:var(--muted); padding:18px; }
  </style>
</head>
<body>
  <div class="page">
    <!-- å·¦ï¼šå½±ç‰‡ + å·¥å…·åˆ— -->
    <section class="left">
      <div class="video-wrap">
        <div class="video-frame">
          <video id="video" preload="metadata" controls crossorigin="anonymous"></video>
        </div>
      </div>

      <!-- å·¥å…·åˆ—ï¼ˆå…©æ’ï¼‰ -->
      <div class="controls">
        <div class="row">
          <button class="btn" id="btn-prev">â® ä¸Šä¸€å¥</button>
          <button class="btn" id="btn-play">â¯ æ’­æ”¾</button>
          <button class="btn" id="btn-next">â­ ä¸‹ä¸€å¥</button>
          <button class="btn" id="btn-repeat-line">ğŸ” é‡è¤‡æœ¬å¥</button>
          <button class="btn" id="btn-auto-pause">ğŸ§  é€å¥è‡ªå‹•æš«åœ</button>
          <button class="btn" id="btn-loop-all">ğŸ”„ æ•´æ®µå¾ªç’°</button>

          <div class="speed-group">
            <span class="muted">é€Ÿåº¦</span>
            <input id="speed" class="speed-range" type="range" min="0.5" max="1.75" step="0.05" value="1.00" />
            <div class="speed-val" id="speedVal">1.00x</div>
          </div>
        </div>

        <div class="row">
          <div class="badge" id="ab-ind">ğŸ…ğŸ…‘ A-B å¾ªç’°</div>
          <button class="btn" id="btn-ab">ğŸ¯ é»å¥å³å¾ªç’°</button>
          <button class="btn" id="btn-clear-loop">ğŸ§¹ å–æ¶ˆå¾ªç’°</button>
          <button class="btn" id="btn-fit">ğŸ–¼ å¡«æ»¿ç•«é¢</button>
        </div>
      </div>
    </section>

    <!-- å³ï¼šåˆ†é ï¼ˆå­—å¹• / æ¸¬é©— / å–®å­—ï¼‰ -->
    <section class="right">
      <div class="tabs">
        <button class="tab active" data-tab="sub">å­—å¹•</button>
        <button class="tab" data-tab="quiz">æ¸¬é©—</button>
        <button class="tab" data-tab="vocab">å–®å­—</button>
      </div>

      <div class="tab-panels">
        <!-- å­—å¹• -->
        <div class="panel active" id="panel-sub">
          <!-- å­—å¹•å·¥å…·åˆ—ï¼šè·Ÿéš¨ / åç§» -->
          <div class="subtool">
            <label class="chip"><input id="follow" type="checkbox" /> è·Ÿéš¨</label>
            <span class="chip label">åç§»</span>
            <span class="chip" id="offsetView">0.0s</span>
            <button class="chip" id="offMinus">-0.5s</button>
            <button class="chip" id="offPlus">+0.5s</button>
            <span class="muted" style="margin-left:auto;">ï¼ˆè³‡æ–™å¾…ä¸²æ¥ï¼‰</span>
          </div>
          <table class="table">
            <thead>
              <tr><th style="width:120px;">æ™‚é–“</th><th>è‹±æ–‡</th><th>ä¸­æ–‡</th></tr>
            </thead>
            <tbody id="subBody">
              <tr><td colspan="3" class="hint">å°šæœªè¼‰å…¥å­—å¹•ï¼Œç­‰ç¬¬ 2 æ­¥ä¸²æ¥å³å¯</td></tr>
            </tbody>
          </table>
        </div>

        <!-- æ¸¬é©— -->
        <div class="panel" id="panel-quiz">
          <div class="hint">æ¸¬é©—é¢æ¿ä¿ç•™å®Œæˆã€‚ç¬¬ 3 æ­¥è¼‰å…¥ <code>data/quiz-*.json</code> å¾Œæ¸²æŸ“ã€‚</div>
        </div>

        <!-- å–®å­— -->
        <div class="panel" id="panel-vocab">
          <div class="hint">å–®å­—é¢æ¿ä¿ç•™å®Œæˆã€‚ç¬¬ 4 æ­¥è¼‰å…¥ <code>data/vocab-*.json</code> å¾Œæ¸²æŸ“ã€‚</div>
        </div>
      </div>
    </section>
  </div>

  <script src="./player.js"></script>
</body>
</html>

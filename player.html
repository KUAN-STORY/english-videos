<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>è‹±èªå½±ç‰‡æ’­æ”¾å™¨</title>
  <style>
    :root{
      --bg:#0b1324;--panel:#0f172a;--panel2:#0f1a33;--border:#1f2a44;
      --text:#e6efff;--muted:#9fb1cc;--btn:#122340;--btn-b:#1f375f;--btn-on:#154274;
    }
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;background:var(--bg);color:var(--text);font-family:ui-sans-serif,system-ui}
    .wrap{display:flex;flex-direction:column;height:100%}
    header{display:flex;justify-content:space-between;align-items:center;padding:14px 20px;background:var(--panel2);border-bottom:1px solid var(--border)}
    header h1{margin:0;font-size:20px}
    #authArea{display:flex;gap:10px;align-items:center}
    .btn{background:#1e293b;color:#e6efff;border:1px solid #334155;border-radius:10px;padding:8px 12px;cursor:pointer}

    main{flex:1;display:flex;gap:20px;padding:20px;overflow:hidden}
    #videoWrap{flex:1;min-width:0;display:flex;flex-direction:column}
    #videoBox{flex:1;min-height:240px;display:flex;align-items:center;justify-content:center;background:#000;border-radius:10px;overflow:hidden}
    #player{width:100%;height:100%;max-height:100%}

    /* å·¥å…·åˆ—å›ºå®šåœ¨å½±ç‰‡ä¸‹æ–¹ã€å¯è¦‹ */
    #controls{margin-top:10px;background:var(--panel2);border:1px solid var(--border);border-radius:12px;padding:12px}
    #controls .row{display:flex;flex-wrap:wrap;gap:10px;align-items:center}
    .kbtn{display:inline-flex;align-items:center;gap:6px;background:var(--btn);border:1px solid var(--btn-b);border-radius:10px;padding:8px 10px;cursor:pointer}
    .kbtn:active{transform:translateY(1px)}
    .kbtn.on{background:var(--btn-on)}
    .range{display:flex;align-items:center;gap:10px;margin-top:8px}

    /* å³å´ï¼šå›ºå®š 50% å¯¬ï¼Œè‡ªå·±æ»¾å‹• */
    .right{flex:1;min-width:0;display:flex;flex-direction:column;background:var(--panel);border:1px solid var(--border);border-radius:12px;overflow:hidden}
    .tabs{display:flex;gap:10px;padding:12px;border-bottom:1px solid var(--border);background:var(--panel2)}
    .tab{background:#122340;border:1px solid #1f375f;border-radius:10px;padding:8px 12px;cursor:pointer}
    .tab.active{background:#154274}
    .pane{flex:1;overflow:auto;padding:12px}

    /* å­—å¹•è¡¨æ ¼ï¼ˆä½ åŸæœ¬çš„ï¼‰ */
    table.subs{width:100%;border-collapse:collapse}
    table.subs th,table.subs td{border-bottom:1px solid #1f2a44;padding:10px 8px;vertical-align:top}
    table.subs th{position:sticky;top:0;background:var(--panel2);z-index:1}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <h1>è‹±èªå½±ç‰‡æ’­æ”¾å™¨</h1>
      <div id="authArea">
        <span id="userNameBadge" style="color:#cbd5e1"></span>
        <button id="btnLogin" class="btn">ç™»å…¥</button>
        <button id="btnLogout" class="btn" style="display:none">ç™»å‡º</button>
      </div>
    </header>

    <main>
      <!-- å·¦ï¼šå½±ç‰‡ï¼ˆä¿æŒ v7.2 éœ€è¦çš„ #player èˆ‡ #controlsï¼‰ -->
      <section id="videoWrap">
        <div id="videoBox">
          <video id="player" controls playsinline></video>
        </div>

        <!-- ä½ çš„åŠŸèƒ½åˆ—ï¼ˆä¿ç•™å¸¸ç”¨ IDï¼Œv7.2 å¯ç›´æ¥ç”¨ï¼‰ -->
        <div id="controls">
          <div class="row">
            <button id="btnPrev" class="kbtn">â® ä¸Šä¸€å¥</button>
            <button id="btnPlay" class="kbtn">â–¶ï¸ æ’­æ”¾ / æš«åœ</button>
            <button id="btnNext" class="kbtn">â­ ä¸‹ä¸€å¥</button>
            <button id="btnRepeatLine" class="kbtn">ğŸ” é‡è¤‡æœ¬å¥</button>
            <button id="btnAutoPause" class="kbtn">ğŸ§  é€å¥è‡ªå‹•æš«åœ</button>
            <button id="btnSectionLoop" class="kbtn">ğŸ” æ•´æ®µå¾ªç’°</button>
            <button id="btnAbLoop" class="kbtn">ğŸ…°ï¸ğŸ…±ï¸ A-B å¾ªç’°</button>
            <button id="btnWordLoop" class="kbtn">ğŸ”Š é»å¥å³å¾ªç’°</button>
            <button id="btnCancelLoop" class="kbtn">ğŸ§¹ å–æ¶ˆå¾ªç’°</button>
            <button id="btnFill" class="kbtn">ğŸ–¼ï¸ å¡«æ»¿ç•«é¢</button>
          </div>
          <div class="range">
            <span>é€Ÿåº¦</span>
            <input id="speedRange" type="range" min="0.5" max="2" step="0.05" value="1">
            <span id="speedLabel">1.00x</span>
          </div>
          <div class="muted" style="margin-top:6px;color:#9fb1cc">ï¼ˆé€™è£¡æ˜¯åŠŸèƒ½æ§åˆ¶åˆ—ï¼Œä¿æŒé¡¯ç¤ºï¼‰</div>
        </div>
      </section>

      <!-- å³ï¼šå­—å¹• / æ¸¬é©— / å–®å­—ï¼ˆå›ºå®š 50%ï¼Œç¨ç«‹æ»¾å‹•ï¼‰ -->
      <section class="right">
        <div class="tabs">
          <div class="tab active" data-tab="sub" id="tabSub">å­—å¹•</div>
          <div class="tab" data-tab="quiz" id="tabQuiz">æ¸¬é©—</div>
          <div class="tab" data-tab="vocab" id="tabVocab">å–®å­—</div>
        </div>
        <div id="pane-sub" class="pane">â€¦ï¼ˆå­—å¹•è¡¨æ ¼ï¼‰â€¦</div>
        <div id="pane-quiz" class="pane" style="display:none">â€¦ï¼ˆæ¸¬é©—å®¹å™¨ï¼‰â€¦</div>
        <div id="pane-vocab" class="pane" style="display:none">â€¦ï¼ˆå–®å­—å®¹å™¨ï¼‰â€¦</div>
      </section>
    </main>
  </div>

  <!-- Supabase ç™»å…¥æ¨¡çµ„ï¼ˆESMï¼‰ -->
  <script type="module" src="login.js"></script>
  <!-- ä½ çš„æ’­æ”¾å™¨ä¸»ç¨‹å¼ï¼ˆv7.2ï¼‰ -->
  <script src="./player.js"></script>
</body>
</html>

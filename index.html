<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>看故事學英文 · Stories</title>
  <link rel="icon" href="data:,">
  <style>
    :root{--bg:#0b1324;--panel:#0f1a33;--border:#203057;--text:#e7eaf3;--muted:#a9b3cf;--accent:#3c7cff}
    html,body{margin:0;height:100%;background:var(--bg);color:var(--text);font-family:system-ui,-apple-system,Segoe UI,Roboto,Noto Sans,sans-serif}
    header{padding:16px;border-bottom:1px solid var(--border);background:#0b142a}
    .wrap{max-width:1100px;margin:24px auto;padding:0 16px}
    h1{margin:0;font-size:20px}
    .lead{color:var(--muted);margin:12px 0 20px}
    .grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(260px,1fr));gap:16px}
    .card{background:var(--panel);border:1px solid var(--border);border-radius:14px;overflow:hidden;display:flex;flex-direction:column}
    .thumb{aspect-ratio:16/9;background:#000}
    .thumb img{width:100%;height:100%;object-fit:cover;display:block}
    .body{padding:12px}
    .title{font-weight:700;margin:0 0 6px}
    .muted{color:var(--muted);font-size:14px}
    .badge{display:inline-block;margin-right:8px;border:1px solid #2f4fb3;color:#9fb2ff;border-radius:999px;padding:2px 8px;font-size:12px}
    .actions{margin-top:10px;display:flex;gap:8px}
    .btn{padding:8px 10px;border:1px solid var(--border);background:#15224a;color:#fff;border-radius:10px;cursor:pointer}
    .btn:hover{filter:brightness(1.08)}
    .search{display:flex;gap:8px;margin-bottom:16px}
    .search input{flex:1;background:#0d1730;border:1px solid var(--border);border-radius:10px;color:#fff;padding:10px}
  </style>
</head>
<body>
  <header class="wrap">
    <h1>看故事學英文 · Stories</h1>
  </header>

  <main class="wrap">
    <p class="lead">所有影片皆可直接觀看；點「前往」開啟播放器（字幕／測驗／單字）。</p>

    <div class="search">
      <input id="q" type="search" placeholder="輸入關鍵字搜尋（中／英標題／標籤）…" />
      <button id="btnReload" class="btn">重新載入</button>
    </div>

    <div id="grid" class="grid"></div>
  </main>

  <script>
  (async function(){
    const $ = (s, r=document)=>r.querySelector(s);
    const grid = $('#grid');

    async function loadList(){
      const res = await fetch('data/index.json?v=' + Date.now());
      if(!res.ok) throw new Error('index.json 載入失敗');
      const list = (await res.json()).items || [];
      render(list);
      return list;
    }

    function render(items){
      grid.innerHTML = '';
      for(const it of items){
        const el = document.createElement('div');
        el.className = 'card';
        el.innerHTML = `
          <div class="thumb"><img src="${it.cover || 'videos/'+(it.slug)+'.jpg'}" alt=""></div>
          <div class="body">
            <div class="title">${it.title_en}</div>
            <div class="muted">${it.title_zh} · ${it.length||'SHORT'}</div>
            <div class="actions">
              <a class="btn" href="player.html?slug=${encodeURIComponent(it.slug)}">前往</a>
              <a class="btn" href="player.html?slug=${encodeURIComponent(it.slug)}&tab=quiz">測驗</a>
            </div>
          </div>`;
        grid.appendChild(el);
      }
    }

    const all = await loadList();
    $('#btnReload').onclick = loadList;
    $('#q').addEventListener('input', e=>{
      const q = e.target.value.toLowerCase().trim();
      if(!q) return render(all);
      render(all.filter(it =>
        (it.title_en||'').toLowerCase().includes(q) ||
        (it.title_zh||'').toLowerCase().includes(q) ||
        (it.tags||[]).join(',').toLowerCase().includes(q)
      ));
    });
  })();
  </script>
</body>
</html>











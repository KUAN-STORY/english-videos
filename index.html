<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>BookWide Â· è‹±èªå­¸ç¿’å…¥å£</title>
  <meta name="description" content="BookWideï¼šç”¨æ•…äº‹ã€éŸ³æ¨‚ã€é›»å½±ã€æ–°èèˆ‡å°ˆæ¥­ä¸»é¡Œï¼Œå¿«é€Ÿå­¸è‹±æ–‡ã€‚æ”¯æ´é€å¥æ’­æ”¾ã€é›™èªå­—å¹•ã€æ¸¬é©—ã€å–®å­—å¡ã€‚">
  <style>
    :root {
      --bg:#0b1324; --ink:#000; --panel:#fff; --border:#ddd;
      --primary:#0b1324; --accent:#3c7cff;
    }
    *{box-sizing:border-box}
    html,body{margin:0;padding:0;font-family:system-ui,"Noto Sans TC";background:#fff;color:#000}
    a{text-decoration:none;color:inherit}
    img{max-width:100%;display:block}

    /* å·¥å…·åˆ—ï¼ˆé»‘åº•ç™½å­—ï¼‰ */
    header{
      background:var(--bg);color:#fff;display:flex;align-items:center;
      justify-content:space-between;padding:10px 24px;position:sticky;top:0;z-index:50;
    }
    .brand{display:flex;align-items:center;gap:10px;font-weight:800;font-size:20px}
    .nav-links{display:flex;gap:16px;align-items:center}
    .nav-links a{color:#fff;font-weight:500}
    .btn{padding:8px 14px;border-radius:8px;cursor:pointer}
    .btn.blue{background:var(--accent);color:#fff;border:none}
    .btn.ghost{background:transparent;color:#fff;border:1px solid #fff}

    /* ä¸»é«”å€ï¼ˆç™½åº•é»‘å­—ï¼‰ */
    .wrap{max-width:1200px;margin:0 auto;padding:24px}
    .h1{font-size:28px;margin:0 0 10px}
    .muted{color:#555}
    .grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:16px}
    .card{background:#fff;border:1px solid var(--border);border-radius:12px;overflow:hidden}
    .thumb{aspect-ratio:16/9;background:#000;position:relative}
    .thumb img{width:100%;height:100%;object-fit:cover;opacity:.9}
    .pill{position:absolute;bottom:10px;left:10px;background:#000;color:#fff;
          font-size:12px;border-radius:999px;padding:4px 10px}
    .pad{padding:14px}
    .meta{display:flex;justify-content:space-between;color:#555;font-size:12px}

    footer{border-top:1px solid #ccc;margin-top:24px;padding:16px 0;color:#666;font-size:14px}

    /* ç™»å…¥æ¨¡çµ„ */
    #authModal {
      position:fixed;inset:0;background:rgba(0,0,0,.4);display:none;align-items:center;justify-content:center;
    }
    #authModal .box{
      background:#fff;color:#000;padding:24px 28px;border-radius:12px;width:320px;max-width:90%;
      box-shadow:0 4px 20px rgba(0,0,0,.3);
    }
    #authModal input{
      width:100%;padding:8px 10px;margin:6px 0;border:1px solid #ccc;border-radius:6px;
    }
    #authModal .actions{display:flex;gap:8px;margin-top:12px}
    #authModal .link{color:#3c7cff;cursor:pointer;font-size:14px}
    #userBadge{margin-left:8px;font-size:14px;color:#ccc}
  </style>
</head>
<body>
  <!-- å·¥å…·åˆ— -->
  <header>
    <div class="brand">
      <img src="./images/bookwide-logo.png" alt="BookWide" style="height:28px"/>
      <span>BookWide</span><span style="font-size:12px;background:#444;padding:2px 6px;border-radius:8px;">Beta</span>
    </div>
    <div class="nav-links">
      <a href="#services">æœå‹™å°è¦½</a>
      <a href="#pricing">æ–¹æ¡ˆåƒ¹æ ¼</a>
      <button id="btnLogin" class="btn ghost">ç™»å…¥</button>
      <button id="btnLogout" class="btn ghost" style="display:none;">ç™»å‡º</button>
      <span id="userBadge"></span>
    </div>
  </header>

  <div class="wrap">
    <section>
      <h1 class="h1">çœ‹å½±ç‰‡ã€åšæ¸¬é©—ã€èƒŒå–®å­— â€”â€” ä¸€é å®Œæˆ</h1>
      <div class="muted">BookWide ç”¨ <b>æ•…äº‹ãƒ»éŸ³æ¨‚ãƒ»é›»å½±ãƒ»æ–°èãƒ»å°ˆæ¥­ä¸»é¡Œ</b> å¸¶ä½ å­¸è‹±æ–‡ã€‚</div>
    </section>

    <!-- å½±ç‰‡å¡ -->
    <section id="catalog" style="margin-top:20px">
      <div class="grid" id="cardGrid"></div>
    </section>

    <!-- å­¸ç¿’åŠŸèƒ½ -->
    <section id="services" style="margin-top:24px">
      <h2>å­¸ç¿’åŠŸèƒ½</h2>
      <div class="grid">
        <div class="card"><div class="pad"><b>ğŸ§  é€å¥æ’­æ”¾</b><br>ä¸€éµå›æ”¾ / ä¸‹ä¸€å¥ã€‚</div></div>
        <div class="card"><div class="pad"><b>ğŸŒ— é›™èªå­—å¹•</b><br>è‹±æ–‡åœ¨ä¸Šã€ä¸­æ–‡åœ¨ä¸‹ã€‚</div></div>
        <div class="card"><div class="pad"><b>ğŸ“ åˆ†å€æ¸¬é©—</b><br>Vocabulary / Grammarã€‚</div></div>
        <div class="card"><div class="pad"><b>ğŸ“š å–®å­—å¡</b><br>é®å­—å¡«ç©ºã€æœ—è®€ã€‚</div></div>
      </div>
    </section>

    <footer>
      <div>Â© <span id="y"></span> BookWide. ç”±å½±ç‰‡ x èªè¨€æ•™è‚²æ‰“é€ ã€‚</div>
    </footer>
  </div>

  <!-- ç™»å…¥å°è©±æ¡† -->
  <div id="authModal">
    <div class="box">
      <h3>æœƒå“¡ç™»å…¥</h3>
      <input id="email" type="email" placeholder="Email">
      <input id="password" type="password" placeholder="å¯†ç¢¼">
      <div class="actions">
        <button id="btnDoLogin" class="btn blue" style="flex:1;">ç™»å…¥</button>
        <button id="btnRegister" class="btn" style="flex:1;">è¨»å†Š</button>
      </div>
      <div style="margin-top:10px;text-align:right">
        <span id="btnForgot" class="link">å¿˜è¨˜å¯†ç¢¼ï¼Ÿ</span>
      </div>
    </div>
  </div>

  <!-- Supabase SDK -->
  <script type="module">
    import { createClient } from "https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2.48.1/+esm";

    const SUPABASE_URL = 'https://qtgwedankftrqjmzuset.supabase.co';
    const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InF0Z3dlZGFua2Z0cnFqbXp1c2V0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTg4NDYxMDMsImV4cCI6MjA3NDQyMjEwM30.jyETpt09pgm66aCZheMgsjtbKlVmYo-lt-hrrt6BF8g';
    const supabase = createClient(SUPABASE_URL, SUPABASE_ANON_KEY, { auth: { persistSession: true }});

    const btnLogin  = document.getElementById('btnLogin');
    const btnLogout = document.getElementById('btnLogout');
    const userBadge = document.getElementById('userBadge');
    const modal = document.getElementById('authModal');

    const emailEl = document.getElementById('email');
    const passEl  = document.getElementById('password');
    const btnDoLogin = document.getElementById('btnDoLogin');
    const btnRegister = document.getElementById('btnRegister');
    const btnForgot = document.getElementById('btnForgot');

    // é¡¯ç¤ºç”¨æˆ¶
    function showUser(user){
      if(user){
        btnLogin.style.display='none';
        btnLogout.style.display='';
        userBadge.textContent = user.email || '';
      }else{
        btnLogin.style.display='';
        btnLogout.style.display='none';
        userBadge.textContent = '';
      }
    }

    // åˆå§‹åŒ–
    const { data: { session } } = await supabase.auth.getSession();
    showUser(session?.user || null);
    supabase.auth.onAuthStateChange((_e, s)=>showUser(s?.user || null));

    // ç™»å…¥ / ç™»å‡º
    btnLogin.onclick = ()=>modal.style.display='flex';
    btnLogout.onclick = async()=>{ await supabase.auth.signOut(); showUser(null); };

    // Email ç™»å…¥
    btnDoLogin.onclick = async()=>{
      const { error } = await supabase.auth.signInWithPassword({
        email: emailEl.value.trim(),
        password: passEl.value.trim()
      });
      if(error) alert(error.message);
      else modal.style.display='none';
    };

    // è¨»å†Š
    btnRegister.onclick = async()=>{
      const { error } = await supabase.auth.signUp({
        email: emailEl.value.trim(),
        password: passEl.value.trim()
      });
      if(error) alert(error.message);
      else alert("è¨»å†ŠæˆåŠŸï¼Œè«‹è‡³ä¿¡ç®±é©—è­‰å¾Œç™»å…¥ã€‚");
    };

    // å¿˜è¨˜å¯†ç¢¼
    btnForgot.onclick = async()=>{
      const email = emailEl.value.trim();
      if(!email){ alert("è«‹å…ˆè¼¸å…¥ Email"); return; }
      const { error } = await supabase.auth.resetPasswordForEmail(email, {
        redirectTo: window.location.origin
      });
      if(error) alert(error.message);
      else alert("å·²å¯„å‡ºé‡è¨­å¯†ç¢¼éƒµä»¶ï¼");
    };

    // é»æ“Šå¤–éƒ¨é—œé–‰
    modal.addEventListener('click', e=>{
      if(e.target===modal) modal.style.display='none';
    });

    // ç¯„ä¾‹æ•™æ
    const CATALOG = [
      { slug:'mid-autumn', title:'Mid-Autumn Festival', cat:'æ•…äº‹', mins:2, level:'A2-B1', thumb:'./videos/mid-autumn.jpg' },
      { slug:'houyi', title:'Hou Yi and the Ten Suns', cat:'æ•…äº‹', mins:3, level:'A2-B1', thumb:'./videos/houyi.jpg' },
      { slug:'lantern', title:'Lantern Festival', cat:'æ•…äº‹', mins:2, level:'A2', thumb:'./videos/lantern.jpg' },
    ];

    const grid=document.getElementById('cardGrid');
    grid.innerHTML = CATALOG.map(it=>`
      <a class="card" href="./player.html?slug=${it.slug}">
        <div class="thumb"><img src="${it.thumb}" alt="${it.title}"><div class="pill">${it.cat}</div></div>
        <div class="pad"><b>${it.title}</b><div class="meta"><span>${it.mins} åˆ†</span><span>${it.level}</span></div></div>
      </a>
    `).join('');
    document.getElementById('y').textContent=new Date().getFullYear();
  </script>
</body>
</html>

















